# Исправление конфликта бота (TelegramConflictError)

## Проблема
Ошибка `TelegramConflictError: terminated by other getUpdates request` возникает, когда несколько экземпляров бота пытаются получать обновления одновременно.

## Причины
1. **Бот запущен локально И на сервере одновременно**
2. **Несколько процессов на сервере**
3. **Старый процесс не завершился**

## Решение

### 1. Остановите локальный запуск бота
Если вы запускали бота локально (`python server.py` или `python bot.py`), остановите его:
- Нажмите `Ctrl+C` в терминале
- Или закройте терминал

### 2. Проверьте процессы на Render
На Render должен быть запущен только один экземпляр. Проверьте:
- В панели Render → ваш сервис → нет ли дублирующихся деплоев
- Убедитесь, что старый деплой завершен

### 3. Перезапустите сервис на Render
1. Откройте ваш сервис на Render
2. Нажмите "Manual Deploy" → "Clear build cache & deploy"
3. Или просто подождите автоматического деплоя после пуша

### 4. Проверьте логи
После перезапуска проверьте логи - ошибка должна исчезнуть.

## Технические детали

Код обновлен так, что:
- Бот запускается только если установлена переменная `PORT` (значит на сервере)
- Локально бот не запускается, только веб-сервер
- Это предотвращает конфликты

## Если проблема сохраняется

1. Проверьте, не запущен ли `bot.py` отдельно
2. Убедитесь, что на Render запущен только `server.py` (не `bot.py`)
3. Проверьте `Procfile` - должно быть `web: python server.py`

